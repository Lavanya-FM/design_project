import{a as S,b as A,c as C,r as a,j as e,N as F}from"./index-34b1b0c3.js";import{a as j,C as g}from"./config-f144c859.js";/* empty css                    */const m=[{id:"t1",name:"Master Ramesh",specialty:"Bridal",load:85,jobs:12},{id:"t2",name:"Master Sunil",specialty:"Designer V-Neck",load:40,jobs:5},{id:"t3",name:"Master Anita",specialty:"Embroidery",load:10,jobs:1},{id:"t4",name:"Master Jatin",specialty:"Classic Cuts",load:65,jobs:9}],D=[{id:"alt_101",orderId:"FF-2401",customer:"Lavanya",type:"Fit Issue",desc:"Sleeves are 0.5 inch too tight.",status:"pending",date:" Feb 08",img:"https://images.unsplash.com/photo-1556905055-8f358a7a47b2?w=400"}],R=()=>{S();const{showToast:d}=A(),l=C(),[i,n]=a.useState("cockpit"),[h,u]=a.useState([]),[w,y]=a.useState(!0),[f,b]=a.useState([]),[x,v]=a.useState([]);a.useEffect(()=>{if(l)return l.emit("join_role","ADMIN"),l.on("admin_update",s=>{console.log("Real-time Admin Ping:",s),d(`LIVE: ${s.payload.message}`,"info"),v(t=>[{id:Date.now(),time:new Date().toLocaleTimeString(),msg:s.payload.message},...t].slice(0,5))}),()=>{l.off("admin_update")}},[l]),a.useState(null);const[c,r]=a.useState(null);a.useEffect(()=>{(async()=>{try{const[t,o]=await Promise.all([j.get(`${g.API_URL}/orders`).catch(()=>({data:[]})),j.get(`${g.API_URL}/designs`).catch(()=>({data:[]}))]);u(t.data),b(o.data)}catch(t){console.error("Admin fetch error:",t)}finally{y(!1)}})()},[]);const N=(s,t)=>{d(`Order ${s} assigned to ${m.find(o=>o.id===t).name}`,"success"),r(null)},p=(s,t)=>{d(`Alteration ${s} ${t==="approve"?"Approved":"Rejected"}`,t==="approve"?"success":"info")};return e.jsxs("div",{className:"admin-dashboard",children:[e.jsx(F,{}),e.jsxs("header",{className:"admin-header",children:[e.jsx("h2",{children:"Fit & Flare Operations Control"}),e.jsxs("div",{className:"admin-tabs",children:[e.jsx("button",{className:`admin-tab ${i==="cockpit"?"active":""}`,onClick:()=>n("cockpit"),children:"Cockpit"}),e.jsx("button",{className:`admin-tab ${i==="orders"?"active":""}`,onClick:()=>n("orders"),children:"Order Manager"}),e.jsx("button",{className:`admin-tab ${i==="tailors"?"active":""}`,onClick:()=>n("tailors"),children:"Tailor Hub"}),e.jsx("button",{className:`admin-tab ${i==="disputes"?"active":""}`,onClick:()=>n("disputes"),children:"Alterations"}),e.jsx("button",{className:`admin-tab ${i==="gallery"?"active":""}`,onClick:()=>n("gallery"),children:"Design Studio"})]})]}),e.jsxs("main",{className:"admin-content container",children:[i==="cockpit"&&e.jsxs("div",{className:"animate-me",children:[e.jsxs("section",{className:"op-stats-grid",children:[e.jsxs("div",{className:"op-stat-card primary",children:[e.jsx("h4",{children:"Today's Revenue"}),e.jsx("div",{className:"op-stat-val",children:"₹42,500"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#27AE60",marginTop:"4px"},children:"↑ 12% from yesterday"})]}),e.jsxs("div",{className:"op-stat-card success",children:[e.jsx("h4",{children:"Jobs in Stitching"}),e.jsx("div",{className:"op-stat-val",children:"24"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Across 8 tailors"})]}),e.jsxs("div",{className:"op-stat-card warning",children:[e.jsx("h4",{children:"Pending Assignment"}),e.jsx("div",{className:"op-stat-val",children:"5"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#D02F44",marginTop:"4px"},children:"Needs attention"})]}),e.jsxs("div",{className:"op-stat-card",children:[e.jsx("h4",{children:"QC Ready"}),e.jsx("div",{className:"op-stat-val",children:"8"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#666",marginTop:"4px"},children:"Final verification"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 340px",gap:"32px"},children:[e.jsxs("div",{className:"admin-table-wrap",children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between"},children:[e.jsx("h3",{style:{fontSize:"1rem"},children:"Critical Deliveries (Next 48h)"}),e.jsx("span",{style:{fontSize:"0.8rem",color:"#D02F44"},children:"5 Urgent"})]}),e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Deadline"})]})}),e.jsx("tbody",{children:[{id:"FF-2401",user:"Lavanya P.",status:"Stitching",date:"Tomorrow"},{id:"FF-2405",user:"Sneha R.",status:"Fabric Sourced",date:"Feb 12"},{id:"FF-2398",user:"Anjali M.",status:"QC Pending",date:"Today"}].map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:["#",s.id]})}),e.jsx("td",{children:s.user}),e.jsx("td",{children:e.jsx("span",{className:`status-pill ${s.status.toLowerCase().replace(" ","-")}`,children:s.status})}),e.jsx("td",{children:s.date})]},s.id))})]})]}),e.jsxs("div",{className:"dash-card",style:{padding:"24px"},children:[e.jsx("h3",{style:{fontSize:"1rem",marginBottom:"16px"},children:"Live Engagement Stream"}),e.jsxs("div",{className:"live-stream-items",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[x.length===0&&e.jsx("p",{style:{fontSize:"0.8rem",color:"#999",fontStyle:"italic"},children:"Waiting for user signals..."}),x.map(s=>e.jsxs("div",{className:"stream-item",style:{borderLeft:"3px solid #D02F44",paddingLeft:"12px",background:"#fdfaf5",padding:"8px 12px",borderRadius:"4px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsx("span",{style:{fontSize:"0.65rem",fontWeight:800},children:s.time}),e.jsx("span",{style:{fontSize:"0.6rem",color:"#D02F44",fontWeight:900},children:"TRENDING"})]}),e.jsx("p",{style:{fontSize:"0.78rem",margin:0,fontWeight:600},children:s.msg})]},s.id))]}),e.jsx("h3",{style:{fontSize:"1rem",margin:"32px 0 16px"},children:"Network Status"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[{label:"Tailor Studio",status:"Online",color:"#27AE60"},{label:"Fabric Merchants",status:"8 Active",color:"#27AE60"},{label:"Payment Gateway",status:"Operational",color:"#27AE60"},{label:"Delivery Partner",status:"High Volume",color:"#F39C12"}].map((s,t)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.85rem",fontWeight:600},children:s.label}),e.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 8px",borderRadius:"4px",background:`${s.color}15`,color:s.color,fontWeight:700},children:s.status})]},t))})]})]})]}),i==="orders"&&e.jsx("div",{className:"animate-me",children:e.jsx("div",{className:"admin-table-wrap",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order ID"}),e.jsx("th",{children:"Style"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Tailor"}),e.jsx("th",{children:"Total"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:(h.length?h:[{id:"FF-2401",style:"Bridal Deep U",status:"Unassigned",total:3500},{id:"FF-2405",style:"Velvet Sweetheart",status:"Assigned",tailor:"Master Ramesh",total:4200}]).map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:["#",s.id]})}),e.jsx("td",{children:s.style||"Custom Design"}),e.jsx("td",{children:e.jsx("span",{className:`status-pill ${s.status.toLowerCase()}`,children:s.status})}),e.jsx("td",{children:s.tailor||"Not Assigned"}),e.jsxs("td",{children:["₹",s.total]}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>r(s.id),children:"Assign Tailor"})})]},s.id))})]})})}),i==="tailors"&&e.jsx("div",{className:"animate-me",children:e.jsx("div",{className:"tailor-list-card",children:m.map(s=>e.jsxs("div",{className:"tailor-item",children:[e.jsx("div",{className:"tailor-avatar",children:s.name.charAt(0)}),e.jsxs("div",{className:"tailor-info",children:[e.jsx("h4",{children:s.name}),e.jsxs("p",{children:[s.specialty," Specialist • ",s.jobs," Active Jobs"]})]}),e.jsxs("div",{className:"tailor-load",children:[e.jsxs("span",{style:{fontSize:"0.85rem",fontWeight:700},children:[s.load,"% Capacity"]}),e.jsx("div",{className:"load-bar-wrap",children:e.jsx("div",{className:"load-bar-fill",style:{width:`${s.load}%`,background:s.load>80?"#D02F44":"#27AE60"}})})]}),e.jsx("button",{className:"btn btn-outline btn-sm",children:"View Jobs"})]},s.id))})}),i==="disputes"&&e.jsx("div",{className:"animate-me",children:D.map(s=>e.jsxs("div",{className:"dispute-card",children:[e.jsxs("div",{className:"dispute-meta",children:[e.jsx("span",{style:{fontSize:"0.75rem",fontWeight:700,color:"#D02F44"},children:"ALTERATION REQUEST"}),e.jsxs("h3",{style:{margin:"8px 0"},children:["Order #",s.orderId]}),e.jsxs("p",{style:{fontSize:"0.88rem",color:"#666"},children:["Customer: ",e.jsx("strong",{children:s.customer})]}),e.jsxs("p",{style:{fontSize:"0.88rem",color:"#666"},children:["Issue: ",s.type]}),e.jsxs("p",{style:{fontSize:"0.82rem",marginTop:"12px",background:"#f8f8f8",padding:"12px",borderRadius:"8px",fontStyle:"italic"},children:['"',s.desc,'"']})]}),e.jsx("div",{className:"dispute-content",children:e.jsxs("div",{style:{display:"flex",gap:"16px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{children:"Client Image Reference"}),e.jsx("img",{src:s.img,className:"dispute-img",alt:"Dispute"})]}),e.jsxs("div",{style:{width:"240px",display:"flex",flexDirection:"column",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{className:"btn btn-primary btn-block",onClick:()=>p(s.id,"approve"),children:"Approve Free Alteration"}),e.jsx("button",{className:"btn btn-outline btn-block",onClick:()=>p(s.id,"reject"),children:"Discuss with Client"}),e.jsx("p",{style:{fontSize:"0.72rem",color:"#999",textAlign:"center"},children:"Approved alterations trigger a merchant fabric request and tailor assignment."})]})]})})]},s.id))}),i==="gallery"&&e.jsxs("div",{className:"animate-me",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px"},children:[e.jsx("h3",{children:"Master Catalog"}),e.jsx("button",{className:"btn btn-primary btn-sm",children:"+ Add New Design"})]}),e.jsx("div",{className:"op-stats-grid",children:f.slice(0,8).map(s=>e.jsxs("div",{className:"dash-card",style:{padding:"0",overflow:"hidden"},children:[e.jsx("img",{src:s.image,style:{width:"100%",height:"140px",objectFit:"cover"},alt:s.name}),e.jsxs("div",{style:{padding:"12px"},children:[e.jsx("h4",{style:{fontSize:"0.85rem",marginBottom:"4px"},children:s.name}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",fontWeight:700},children:["₹",s.price]}),e.jsx("span",{className:"status-pill active",style:{fontSize:"0.65rem"},children:"Visible"})]})]})]},s.id))})]})]}),c&&e.jsx("div",{className:"modal-overlay",onClick:()=>r(null),children:e.jsxs("div",{className:"modal-card",style:{maxWidth:"480px"},onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Assign Tailor for #",c]}),e.jsx("button",{className:"modal-close",onClick:()=>r(null),children:"×"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{style:{marginBottom:"20px",fontSize:"0.9rem"},children:"Select a master tailor to handle this custom stitching job."}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:m.map(s=>e.jsxs("div",{className:"selection-card",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},onClick:()=>N(c,s.id),children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("h4",{style:{margin:0},children:s.name}),e.jsxs("span",{style:{fontSize:"0.75rem",color:"#666"},children:[s.specialty," • ",s.load,"% Load"]})]}),e.jsx("button",{className:"btn btn-primary btn-sm",children:"Select"})]},s.id))})]})]})})]})};export{R as default};
