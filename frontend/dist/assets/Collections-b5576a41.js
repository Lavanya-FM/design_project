import{a as k,u as w,r as t,B as h,j as e,N as C,F as A}from"./index-c38fd625.js";import{a as D,C as _}from"./config-b8c43400.js";const E={neck:["Deep U","V Neck","Sweetheart","Boat Neck","Deep Round","Pot Neck","Keyhole","High Neck"],sleeve:["Sleeveless","Short Sleeves","Elbow Length","Full Sleeves"],fabric:["Raw Silk","Velvet","Cotton Silk","Net/Lace","Brocade"],occasion:["Bridal","Party","Workwear","Everyday"]},F=[{label:"Popular Designs",value:"popular"},{label:"New Arrivals",value:"newest"},{label:"Price: Low â†’ High",value:"price_asc"},{label:"Price: High â†’ Low",value:"price_desc"}],P=()=>{const g=k(),x=w(),p=new URLSearchParams(g.search).get("search")||"",[j,y]=t.useState(h),[u,b]=t.useState(h);t.useState(!1);const[i,m]=t.useState(p),[n,N]=t.useState({neck:[],sleeve:[],fabric:[],occasion:[]}),[o,S]=t.useState("popular");t.useEffect(()=>{(async()=>{try{const a=await D.get(`${_.API_URL}/designs`);if(a.data&&a.data.length>0){const l=a.data.map(c=>({...c,tags:Array.isArray(c.tags)?c.tags:c.tags?JSON.parse(c.tags):[],neck:Array.isArray(c.neck)?c.neck:c.neck?JSON.parse(c.neck):[],sleeve:Array.isArray(c.sleeve)?c.sleeve:c.sleeve?JSON.parse(c.sleeve):[],fabric:Array.isArray(c.fabric)?c.fabric:c.fabric?JSON.parse(c.fabric):[]})),r=[...h,...l.filter(c=>!h.find(d=>d.id===c.id))];y(r)}}catch(a){console.error("API sync failed, using static master data:",a.message)}})()},[]),t.useEffect(()=>{m(p)},[p]),t.useEffect(()=>{let s=[...j];if(i){const a=i.toLowerCase();s=s.filter(l=>{var r,c;return((r=l.name)==null?void 0:r.toLowerCase().includes(a))||((c=l.tags)==null?void 0:c.some(d=>d.toLowerCase().includes(a)))})}Object.keys(n).forEach(a=>{const l=n[a];l.length>0&&(a==="occasion"?s=s.filter(r=>l.includes(r.category)):s=s.filter(r=>l.some(c=>(r[a]||[]).includes(c))))}),o==="price_asc"&&s.sort((a,l)=>a.price-l.price),o==="price_desc"&&s.sort((a,l)=>l.price-a.price),o==="newest"&&s.sort((a,l)=>new Date(l.created_at||0)-new Date(a.created_at||0)),o==="popular"&&s.sort((a,l)=>(l.popularity||0)-(a.popularity||0)),b(s)},[i,n,o,j]);const v=(s,a)=>{N(l=>{const r=l[s],c=r.includes(a)?r.filter(d=>d!==a):[...r,a];return{...l,[s]:c}})},f=()=>{N({neck:[],sleeve:[],fabric:[],occasion:[]}),m(""),x("/collections")};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("div",{className:"page-container collection-page",children:e.jsxs("div",{className:"container collections-layout",children:[e.jsxs("aside",{className:"filters-sidebar animate-me",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{children:"Filter By"}),e.jsx("button",{className:"btn-text",onClick:f,children:"Clear All"})]}),Object.entries(E).map(([s,a])=>e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-cat-title",children:s.replace("_"," ")}),e.jsx("div",{className:"filter-pills",children:a.map(l=>e.jsx("div",{className:`pill-option ${n[s].includes(l)?"active":""}`,onClick:()=>v(s,l),children:l},l))})]},s))]}),e.jsxs("main",{className:"results-area",children:[e.jsxs("div",{className:"results-header animate-me",children:[e.jsxs("div",{className:"results-info",children:[e.jsx("h1",{className:"page-title",children:"Blouse Styles"}),e.jsxs("p",{children:["Discover ",u.length," hand-crafted designs ready for your measurements."]})]}),e.jsxs("div",{className:"results-sort",children:[e.jsx("span",{className:"sort-label",children:"Sort by"}),e.jsx("select",{value:o,onChange:s=>S(s.target.value),children:F.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),(i||Object.values(n).some(s=>s.length>0))&&e.jsxs("div",{className:"active-filter-chips animate-me",children:[i&&e.jsxs("div",{className:"chip",children:['" ',i,' " ',e.jsx("span",{onClick:()=>m(""),children:"Ã—"})]}),Object.entries(n).flatMap(([s,a])=>a.map(l=>e.jsxs("div",{className:"chip",children:[l," ",e.jsx("span",{onClick:()=>v(s,l),children:"Ã—"})]},l)))]}),e.jsx("div",{className:"designs-grid",children:u.map(s=>{var a,l,r;return e.jsxs("div",{className:"design-card-premium hover-scale animate-me",children:[e.jsxs("div",{className:"card-image-container",children:[e.jsx("img",{src:s.image_url||s.image,alt:s.name,loading:"lazy",onError:c=>{c.target.src="https://images.unsplash.com/photo-1583316174775-bd6dc0e9f298?w=800"}}),e.jsx("div",{className:"card-badge",children:s.complexity}),e.jsx("div",{className:"card-overlay",children:e.jsx("button",{className:"btn-customize-cta",onClick:()=>x("/customizer",{state:{prefill:s}}),children:"Select & Customize"})})]}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"card-meta",children:[e.jsx("span",{className:"card-cat",children:s.category}),e.jsxs("span",{className:"card-time",children:["ðŸšš ",s.delivery_days," days"]})]}),e.jsx("h3",{className:"card-title",children:s.name}),s.work_type&&e.jsxs("div",{className:"card-work-badge",style:{fontSize:"0.7rem",color:"#D02F44",fontWeight:"bold",textTransform:"uppercase",marginBottom:"5px"},children:["âœ¨ ",s.work_type]}),e.jsxs("div",{className:"card-tags",children:[e.jsx("span",{className:"tag-pill",children:(a=s.neck)==null?void 0:a[0]}),e.jsx("span",{className:"tag-pill",children:(l=s.sleeve)==null?void 0:l[0]}),(r=s.tags)==null?void 0:r.slice(0,1).map(c=>e.jsx("span",{className:"tag-pill",children:c},c))]}),s.props&&s.props.length>0&&e.jsxs("p",{className:"card-props",style:{fontSize:"0.75rem",color:"#666",marginTop:"8px",fontStyle:"italic"},children:["Accents: ",s.props.join(", ")]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"card-price",children:[e.jsx("span",{className:"price-label",children:"Starting at"}),e.jsxs("span",{className:"price-val",children:["â‚¹",s.base_price||s.price]})]})})]})]},s.id)})}),u.length===0&&e.jsxs("div",{className:"empty-state animate-me",children:[e.jsx("div",{className:"empty-icon shadow-lux",children:"ðŸ•µï¸â€â™€ï¸"}),e.jsx("h2",{children:"No designs match your selection"}),e.jsx("p",{children:"We couldn't find exactly what you're looking for. Try clearing some filters or exploring our popular styles."}),e.jsxs("div",{className:"empty-actions",children:[e.jsx("button",{className:"btn btn-primary",onClick:f,children:"Clear All Filters"}),e.jsx("button",{className:"btn btn-outline",onClick:()=>m("Bridal"),children:"Show Bridal Designs"})]})]})]})]})}),e.jsx(A,{})]})};export{P as default};
