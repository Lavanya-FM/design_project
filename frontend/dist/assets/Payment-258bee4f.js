import{u as p,r as i,j as e,N as x}from"./index-c38fd625.js";import{a as u,C as j}from"./config-b8c43400.js";/* empty css                 */const g=()=>{const l=p(),[s,c]=i.useState(""),[t,d]=i.useState(!1),r=JSON.parse(localStorage.getItem("currentOrder")||"{}"),o=JSON.parse(localStorage.getItem("user")||"{}"),a=r.total||0,m=async()=>{if(!s){alert("Please select a payment method.");return}d(!0);try{const n={userId:o.id||null,items:[{designId:"8681284d-29e2-472e-8c34-eb17918d052d",customization:r.selections,measurements:r.measurements,price:a}],totalAmount:a},h=await u.post(`${j.API_URL}/orders`,n);console.log("Order saved to DB:",h.data),localStorage.removeItem("currentOrder"),l("/order/success")}catch(n){console.error("Order failed to save:",n),alert("Payment processed, but order saving failed. Please contact support.")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(x,{}),e.jsx("div",{className:"page-container checkout-page",children:e.jsxs("div",{className:"container",children:[e.jsx("h1",{className:"page-title",children:"Secure Payment"}),e.jsxs("div",{className:"checkout-grid",children:[e.jsx("div",{className:"checkout-left",children:e.jsxs("div",{className:"review-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Choose Payment Method"}),e.jsx("span",{className:"secure-badge",children:"ðŸ”’ Encrypted 256-bit"})]}),e.jsxs("div",{className:"payment-options",children:[e.jsxs("div",{className:`payment-method ${s==="upi"?"selected":""}`,onClick:()=>c("upi"),children:[e.jsx("span",{className:"payment-icon",children:"ðŸ“±"}),e.jsxs("div",{children:[e.jsx("b",{children:"UPI / GPay / PhonePe"}),e.jsx("p",{className:"method-desc",children:"Instant payment using UPI ID or QR Code"})]}),e.jsx("input",{type:"radio",checked:s==="upi",readOnly:!0})]}),e.jsxs("div",{className:`payment-method ${s==="card"?"selected":""}`,onClick:()=>c("card"),children:[e.jsx("span",{className:"payment-icon",children:"ðŸ’³"}),e.jsxs("div",{children:[e.jsx("b",{children:"Credit / Debit Card"}),e.jsx("p",{className:"method-desc",children:"Visa, Mastercard, RuPay"})]}),e.jsx("input",{type:"radio",checked:s==="card",readOnly:!0})]}),e.jsxs("div",{className:`payment-method ${s==="netbanking"?"selected":""}`,onClick:()=>c("netbanking"),children:[e.jsx("span",{className:"payment-icon",children:"ðŸ¦"}),e.jsxs("div",{children:[e.jsx("b",{children:"Net Banking"}),e.jsx("p",{className:"method-desc",children:"All major Indian banks supported"})]}),e.jsx("input",{type:"radio",checked:s==="netbanking",readOnly:!0})]}),e.jsxs("div",{className:`payment-method ${s==="cod"?"selected":""}`,onClick:()=>c("cod"),children:[e.jsx("span",{className:"payment-icon",children:"ðŸ’µ"}),e.jsxs("div",{children:[e.jsx("b",{children:"Cash on Delivery"}),e.jsx("p",{className:"method-desc",children:"Pay upon receiving the finished product (Advance â‚¹500 required)"})]}),e.jsx("input",{type:"radio",checked:s==="cod",readOnly:!0})]})]})]})}),e.jsx("div",{className:"checkout-right",children:e.jsxs("div",{className:"price-card",children:[e.jsx("h3",{children:"Payment Summary"}),e.jsxs("div",{className:"price-rows",children:[e.jsxs("div",{className:"price-row",children:[e.jsx("span",{children:"Order Total"}),e.jsxs("span",{children:["â‚¹",a]})]}),e.jsxs("div",{className:"price-row total-row",children:[e.jsx("span",{children:"Amount to Pay"}),e.jsxs("span",{children:["â‚¹",a]})]})]}),e.jsx("button",{className:"btn btn-primary btn-block pay-btn",onClick:m,disabled:t,children:t?"Processing...":`Pay â‚¹${a}`}),e.jsxs("p",{className:"secure-note",style:{marginTop:"15px",fontSize:"0.75rem"},children:["By proceeding, you agree to our Terms & Conditions. ",e.jsx("br",{}),"Refunds are processed within 5-7 business days."]})]})})]})]})})]})};export{g as default};
