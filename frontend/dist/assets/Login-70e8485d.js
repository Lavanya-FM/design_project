import{r as n,u as b,j as e,N as v}from"./index-c38fd625.js";import{a as S,C as w}from"./config-b8c43400.js";const C=()=>{const[s,c]=n.useState(!0),[a,x]=n.useState({fullName:"",email:"",password:""}),[d,u]=n.useState(!1),[m,l]=n.useState(""),o=b(),i=r=>{x({...a,[r.target.name]:r.target.value}),l("")},g=async r=>{var h,p;r.preventDefault(),u(!0),l("");const j=s?"/auth/login":"/auth/register",N=s?{email:a.email,password:a.password}:{fullName:a.fullName,email:a.email,password:a.password};try{const t=await S.post(`${w.API_URL}${j}`,N);localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),t.data.user.role==="admin"?o("/admin"):o("/dashboard")}catch(t){l(((p=(h=t.response)==null?void 0:h.data)==null?void 0:p.message)||"Authentication failed. Please try again.")}finally{u(!1)}},f=()=>{localStorage.setItem("isGuest","true"),o("/customizer")};return e.jsxs("div",{className:"login-page",children:[e.jsx(v,{}),e.jsx("div",{className:"auth-card-wrapper fade-in",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("span",{className:"auth-icon",children:"ðŸ”’"}),e.jsx("h2",{children:s?"Fit & Flare Studio":"Create Account"}),e.jsx("p",{children:s?"Secure access to your bespoke wardrobe":"Join us for a tailored experience"})]}),m&&e.jsx("div",{className:"auth-error-msg",style:{color:"#D02F44",marginBottom:"15px",fontSize:"0.9rem",textAlign:"center",background:"#FFEBEE",padding:"8px",borderRadius:"4px"},children:m}),e.jsxs("form",{className:"auth-form",onSubmit:g,children:[!s&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:a.fullName,onChange:i,placeholder:"Jane Doe",className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:i,placeholder:"name@example.com",className:"form-input",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:i,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"form-input",required:!0})]}),s&&e.jsx("div",{className:"form-actions",children:e.jsx("a",{href:"#",className:"forgot-password",children:"Forgot Password?"})}),e.jsx("button",{className:"btn btn-primary btn-block",disabled:d,children:d?"Processing...":s?"Login":"Sign Up"})]}),e.jsx("div",{className:"auth-divider",children:e.jsx("span",{children:"OR"})}),e.jsx("button",{className:"btn btn-outline btn-block",onClick:f,children:"Continue as Guest"}),e.jsx("div",{className:"auth-footer",children:s?e.jsxs("p",{children:["Don't have an account? ",e.jsx("button",{className:"link-btn",onClick:()=>c(!1),children:"Sign Up"})]}):e.jsxs("p",{children:["Already have an account? ",e.jsx("button",{className:"link-btn",onClick:()=>c(!0),children:"Login"})]})})]})})]})};export{C as default};
